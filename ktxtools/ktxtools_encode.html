<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Khronos Texture Tools: ktx encode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ktx_logo_200.png"/></td>
  <td id="projectalign">
   <div id="projectname">Khronos Texture Tools<span id="projectnumber">&#160;4.3.0</span>
   </div>
   <div id="projectbrief">Libraries and tools to create and read KTX image texture files.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ktxtools_encode.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ktx encode</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Encode a KTX2 file.</p>
<h1><a class="anchor" id="ktxtools_encode_synopsis"></a>
SYNOPSIS</h1>
<p>ktx encode [option...] <em>input-file</em> <em>output-file</em> </p>
<h1><a class="anchor" id="ktxtools_encode_description"></a>
DESCRIPTION</h1>
<p><b>ktx</b> <b>encode</b> can encode the KTX file specified as the <em>input-file</em> argument, optionally supercompress the result, and save it as the <em>output-file</em>. The input file must be R8, RG8, RGB8 or RGBA8 (or their sRGB variant). If the input file is invalid the first encountered validation error is displayed to the stderr and the command exits with the relevant non-zero status code.</p>
<p>The following options are available: </p><dl>
<dt>&ndash;codec basis-lz | uastc </dt>
<dd><p class="startdd">Target codec followed by the codec specific options. With each encoding option the following encoder specific options become valid, otherwise they are ignored. Case-insensitive.</p>
<p class="enddd"><dl>
<dt>basis-lz:  </dt>
<dd><p class="startdd">Supercompress the image data with ETC1S / BasisLZ. RED images will become RGB with RED in each component (RRR). RG images will have R in the RGB part and G in the alpha part of the compressed texture (RRRG). When set, the following BasisLZ-related options become valid, otherwise they are ignored. </p>
<dl>
<dt>&ndash;clevel &lt;level&gt; </dt>
<dd>ETC1S / BasisLZ compression level, an encoding speed vs. quality tradeoff. Range is [0,5], default is 1. Higher values are slower but give higher quality. </dd>
<dt>&ndash;qlevel &lt;level&gt; </dt>
<dd><p class="startdd">ETC1S / BasisLZ quality level. Range is [1,255]. Lower gives better compression/lower quality/faster. Higher gives less compression/higher quality/slower. <b>--qlevel</b> automatically determines values for <b>--max-endpoints</b>, <b>--max-selectors</b>, <b>--endpoint-rdo-threshold</b> and <b>--selector-rdo-threshold</b> for the target quality level. Setting these options overrides the values determined by -qlevel which defaults to 128 if neither it nor <b>--max-endpoints</b> and <b>--max-selectors</b> have been set.</p>
<p class="interdd">Note that both of <b>--max-endpoints</b> and <b>--max-selectors</b> must be set for them to have any effect. If all three options are set, a warning will be issued that <b>--qlevel</b> will be ignored.</p>
<p class="enddd">Note also that <b>--qlevel</b> will only determine values for <b>--endpoint-rdo-threshold</b> and <b>--selector-rdo-threshold</b> when its value exceeds 128, otherwise their defaults will be used. </p>
</dd>
<dt>&ndash;max-endpoints &lt;arg&gt; </dt>
<dd>Manually set the maximum number of color endpoint clusters. Range is [1,16128]. Default is 0, unset. </dd>
<dt>&ndash;endpoint-rdo-threshold &lt;arg&gt; </dt>
<dd>Set endpoint RDO quality threshold. The default is 1.25. Lower is higher quality but less quality per output bit (try [1.0,3.0]). This will override the value chosen by <b>--qlevel</b>. </dd>
<dt>&ndash;max-selectors &lt;arg&gt; </dt>
<dd>Manually set the maximum number of color selector clusters from [1,16128]. Default is 0, unset. </dd>
<dt>&ndash;selector-rdo-threshold &lt;arg&gt; </dt>
<dd>Set selector RDO quality threshold. The default is 1.25. Lower is higher quality but less quality per output bit (try [1.0,3.0]). This will override the value chosen by <b>--qlevel</b>. </dd>
<dt>&ndash;no-endpoint-rdo </dt>
<dd>Disable endpoint rate distortion optimizations. Slightly faster, less noisy output, but lower quality per output bit. Default is to do endpoint RDO. </dd>
<dt>&ndash;no-selector-rdo </dt>
<dd>Disable selector rate distortion optimizations. Slightly faster, less noisy output, but lower quality per output bit. Default is to do selector RDO. </dd>
</dl>
<p class="enddd"></p>
</dd>
<dt>uastc:  </dt>
<dd><p class="startdd">Create a texture in high-quality transcodable UASTC format. </p>
<dl>
<dt>&ndash;uastc-quality &lt;level&gt; </dt>
<dd><p class="startdd">This optional parameter selects a speed vs quality tradeoff as shown in the following table:</p>
<table class="doxtable">
<tr>
<th>Level </th><th>Speed </th><th>Quality </th></tr>
<tr>
<td>0 </td><td>Fastest </td><td>43.45dB </td></tr>
<tr>
<td>1 </td><td>Faster </td><td>46.49dB </td></tr>
<tr>
<td>2 </td><td>Default </td><td>47.47dB </td></tr>
<tr>
<td>3 </td><td>Slower </td><td>48.01dB </td></tr>
<tr>
<td>4 </td><td>Very slow </td><td>48.24dB </td></tr>
</table>
<p class="enddd">You are strongly encouraged to also specify <b>--zcmp</b> to losslessly compress the UASTC data. This and any LZ-style compression can be made more effective by conditioning the UASTC texture data using the Rate Distortion Optimization (RDO) post-process stage. When uastc encoding is set the following options become available for controlling RDO: </p>
</dd>
<dt>&ndash;uastc-rdo </dt>
<dd>Enable UASTC RDO post-processing. </dd>
<dt>&ndash;uastc-rdo-l &lt;lambda&gt; </dt>
<dd><p class="startdd">Set UASTC RDO quality scalar (lambda) to <em>lambda</em>. Lower values yield higher quality/larger LZ compressed files, higher values yield lower quality/smaller LZ compressed files. A good range to try is [.25,10]. For normal maps a good range is [.25,.75]. The full range is [.001,10.0]. Default is 1.0.</p>
<p class="enddd">Note that previous versions used the <b>--uastc-rdo-q</b> option which was removed because the RDO algorithm changed. </p>
</dd>
<dt>&ndash;uastc-rdo-d &lt;dictsize&gt; </dt>
<dd>Set UASTC RDO dictionary size in bytes. Default is 4096. Lower values=faster, but give less compression. Range is [64,65536]. </dd>
<dt>&ndash;uastc-rdo-b &lt;scale&gt; </dt>
<dd>Set UASTC RDO max smooth block error scale. Range is [1.0,300.0]. Default is 10.0, 1.0 is disabled. Larger values suppress more artifacts (and allocate more bits) on smooth blocks. </dd>
<dt>&ndash;uastc-rdo-s &lt;deviation&gt; </dt>
<dd>Set UASTC RDO max smooth block standard deviation. Range is [.01,65536.0]. Default is 18.0. Larger values expand the range of blocks considered smooth. </dd>
<dt>&ndash;uastc-rdo-f </dt>
<dd>Do not favor simpler UASTC modes in RDO mode. </dd>
<dt>&ndash;uastc-rdo-m </dt>
<dd>Disable RDO multithreading (slightly higher compression, deterministic). </dd>
</dl>
<p class="enddd"></p>
</dd>
<dt>common:  </dt>
<dd><p class="startdd">Common options. </p>
<dl>
<dt>&ndash;normal-mode </dt>
<dd><p class="startdd">Only valid for linear textures with two or more components. If the input texture has three or four linear components it is assumed to be a three component linear normal map storing unit length normals as (R=X, G=Y, B=Z). A fourth component will be ignored. The map will be converted to a two component X+Y normal map stored as (RGB=X, A=Y) prior to encoding. If unsure that your normals are unit length, use <b>--normalize</b>. If the input has 2 linear components it is assumed to be an X+Y map of unit normals.</p>
<p class="enddd">The Z component can be recovered programmatically in shader code by using the equations: </p><pre>
    nml.xy = texture(...).ga;              // Load in [0,1]
    nml.xy = nml.xy * 2.0 - 1.0;           // Unpack to [-1,1]
    nml.z = sqrt(1 - dot(nml.xy, nml.xy)); // Compute Z
            </pre><p> For ETC1S / BasisLZ encoding, <b>'--encode</b> basis-lz', RDO is disabled (no selector RDO, no endpoint RDO) to provide better quality. </p>
</dd>
<dt>&ndash;threads &lt;count&gt; </dt>
<dd>Explicitly set the number of threads to use during compression. By default, ETC1S / BasisLZ will use the number of threads reported by thread::hardware_concurrency or 1 if value returned is 0. </dd>
<dt>&ndash;no-sse </dt>
<dd>Forbid use of the SSE instruction set. Ignored if CPU does not support SSE. SSE can only be disabled on the basis-lz and uastc compressors. </dd>
</dl>
</dd>
</dl>
 <dl>
<dt>&ndash;compare-ssim </dt>
<dd>Calculate encoding structural similarity index measure (SSIM) and print it to stdout. Requires Basis-LZ or UASTC encoding. </dd>
<dt>&ndash;compare-psnr </dt>
<dd>Calculate encoding peak signal-to-noise ratio (PSNR) and print it to stdout. Requires Basis-LZ or UASTC encoding. </dd>
</dl>
 </p>
</dd>
</dl>
<p><dl>
<dt>&ndash;zstd &lt;level&gt; </dt>
<dd>Supercompress the data with Zstandard. Cannot be used with ETC1S / BasisLZ format. Level range is [1,22]. Lower levels give faster but worse compression. Values above 20 should be used with caution as they require more memory.  </dd>
<dt>&ndash;zlib &lt;level&gt; </dt>
<dd>Supercompress the data with ZLIB. Cannot be used with ETC1S / BasisLZ format. Level range is [1,9]. Lower levels give faster but worse compression.  </dd>
</dl>
 <dl>
<dt>-h, &ndash;help </dt>
<dd>Print this usage message and exit. </dd>
<dt>-v, &ndash;version </dt>
<dd>Print the version number of this program and exit. </dd>
</dl>
</p>
<h1><a class="anchor" id="ktxtools_encode_exitstatus"></a>
EXIT STATUS</h1>
<p><ul>
<li>0 - Success</li>
<li>1 - Command line error</li>
<li>2 - IO failure</li>
<li>3 - Invalid input file</li>
<li>4 - Runtime or library error</li>
<li>5 - Not supported state or operation</li>
<li>6 - Requested feature is not yet implemented </li>
</ul>
</p>
<h1><a class="anchor" id="ktxtools_encode_history"></a>
HISTORY</h1>
<dl class="section user"><dt>Version 4.0</dt><dd><ul>
<li>Initial version</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="ktxtools_encode_author"></a>
AUTHOR</h1>
<ul>
<li>Mátyás Császár [Vader], RasterGrid www.rastergrid.com</li>
<li>Daniel Rákos, RasterGrid www.rastergrid.com </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
